!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);i(1);function n(e){var t=this,i=function(){function e(e){var t=e.range,i=void 0===t?100:t,n=e.start,r=void 0===n?0:n,s=e.end,o=void 0===s?null:s,l=e.origin,h=void 0===l?0:l,a=e.step,d=void 0===a?1:a;this._start=Math.max(r-h,0),this._end=null===o?i:Math.min(i,Math.max(this.start,o-h)),this.range=i,this.origin=h,this.step=d,this.value=[this.start+this.origin,this.end+this.origin]}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(e){this._start=Math.min(this.end,Math.max(e,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(e){this._end=Math.max(this.start,Math.min(e,this.range))},enumerable:!1,configurable:!0}),e.prototype.update=function(e){if(e.direct)this.end=void 0!==e.endPrc?100/this.range*(e.endPrc-this.origin):this.end,this.start=void 0!==e.startPrc?100/this.range*(e.startPrc-this.origin):this.start;else if(e.tepping_first||e.tepping_last)e.tepping_first&&(this.start+=e.tepping_first*this.step),e.tepping_last&&(this.end+=e.tepping_last*this.step);else{var t=this.range/100*e.startPrc,i=this.range/100*e.endPrc;(i-this.end>=.7*this.step||this.end-i>=.7*this.step||i==this.range)&&(this.end=Math.round(i/this.step)*this.step),(t-this.start>=.7*this.step||this.start-t>=.7*this.step||0==t)&&(this.start=Math.round(t/this.step)*this.step)}this.value=[this.start+this.origin,this.end+this.origin],console.log(this.value),this.updated(100/this.range*this.start,100/this.range*this.end)},e}(),n=function(){function e(e){var t=e.orient,i=void 0===t?"horizontal":t;this.inversion="vertical"===i}return e.prototype.shiftReac=function(e){this.inversion?(e.endPrc&&(e.endPrc=100-e.endPrc),e.startPrc&&(e.startPrc=100-e.startPrc),this.callToModel(e)):this.callToModel(e)},e.prototype.updateReact=function(e,t){this.callToView(e,t)},e}(),r=function(){function e(e){var i=e.orient,n=void 0===i?"horizontal":i,r=e.type,s=void 0===r?"range":r,o=e.tumblerSize,l=void 0===o?"20px":o,h=e.tumblerColor,a=void 0===h?"darkblue":h,d=e.tumblerRoundness,u=void 0===d?"50%":d,c=e.tumblerBorders,p=void 0===c?"none":c,g=e.lineWeight,f=void 0===g?"12px":g,m=e.lineColor,y=void 0===m?"grey":m,v=e.lineRoundness,b=void 0===v?"10px":v,w=e.selectedBackground,S=void 0===w?"blue":w,_=e.selectedWeight,P=void 0===_?"16px":_;this.LineClass=function(){function e(e){this.orient=e.orient,this.weight=e.weight,this.color=e.color,this.roundness=e.roundness}return e.prototype.render=function(){var e=this.element=t.querySelector(".RangeSlider__line");"vertical"==this.orient?e.style.width=this.weight:e.style.height=this.weight,e.style.background=this.color,e.style.borderRadius=this.roundness},e}(),this.TumblerClass=function(){function e(e){this.html="<span tabindex= \"1\"; class='RangeSlider__tumbler'> </span>",this.orient=e.orient,this.type=e.type,this.size=e.size,this.color=e.color,this.roundness=e.roundness}return e.prototype.render=function(){var e=this;this.elements=t.querySelectorAll(".RangeSlider__tumbler"),this.elements.forEach((function(t,i){var n=t;n.style.height=e.size,n.style.width=e.size,n.style.background=e.color,n.style.borderRadius=e.roundness,n.style.border=e.borders,n.style.transform="vertical"==e.orient?"translateY(50%)":"translateX(-50%)","vertical"==e.orient?n.style.marginLeft="calc( (-"+e.size+" + "+n.parentElement.style.width+") /2)":n.style.marginTop="calc((-"+e.size+" + "+n.parentElement.style.height+")/2)","point"===e.type&&0===i&&(n.style.display="none"),n.onmousedown=e.onclick,n.onfocus=e.onfocus}))},e}(),this.SelectedClass=function(){function e(e){this.html="<div class='RangeSlider__selected'></div>",this.orient=e.orient,this.color=e.color,this.weight=e.weight,this.roundness=e.roundness}return e.prototype.render=function(){var e=this.element=t.querySelector(".RangeSlider__selected");"vertical"==this.orient?e.style.marginLeft="calc( (-"+this.weight+" + "+e.parentElement.style.width+") /2)":e.style.marginTop="calc( (-"+this.weight+" + "+e.parentElement.style.height+") /2)","vertical"==this.orient?e.style.width=this.weight:e.style.height=this.weight,e.style.background=this.color,e.style.borderRadius=this.roundness},e}(),this.element,this.orient=n,this.type=s,this.tumbler=new this.TumblerClass({orient:n,type:s,size:l,color:a,roundness:u,borders:p}),this.line=new this.LineClass({orient:n,weight:f,color:y,roundness:b}),this.selected=new this.SelectedClass({roundness:b,orient:n,weight:P,color:S})}return e.prototype.render=function(){var e=this;return t.innerHTML="<div class='RangeSlider RangeSlider_orient_"+this.orient+"'><div class='RangeSlider__line'> "+this.selected.html+this.tumbler.html+this.tumbler.html+"</div> <div class='RangeSlider__meaning'></div> </div></div>",this.tumbler.onclick=function(i){i.preventDefault(),t.onmousemove=function(n){var r=i.target,s=t.querySelector(".RangeSlider"),o="vertical"===e.orient?(n.clientY-s.getBoundingClientRect().y)/s.getBoundingClientRect().height*100:(n.clientX-s.getBoundingClientRect().x)/s.getBoundingClientRect().width*100;r.nextSibling?e.tumblerShifted({startPrc:o}):e.tumblerShifted({endPrc:o})},document.onmouseup=function(e){t.onmousemove=null,document.onmouseup=null}},this.tumbler.onfocus=function(t){var i=Boolean(t.target.nextSibling);document.onkeydown=function(t){i?"ArrowDown"===t.key&&"vertical"===e.orient||"ArrowLeft"===t.key&&"vertical"!==e.orient?e.tumblerShifted({tepping_first:-1}):("ArrowUp"===t.key&&"vertical"===e.orient||"ArrowRight"===t.key&&"vertical"!==e.orient)&&e.tumblerShifted({tepping_first:1}):"ArrowDown"===t.key&&"vertical"===e.orient||"ArrowLeft"===t.key&&"vertical"!==e.orient?e.tumblerShifted({tepping_last:-1}):("ArrowUp"===t.key&&"vertical"===e.orient||"ArrowRight"===t.key&&"vertical"!==e.orient)&&e.tumblerShifted({tepping_last:1})},t.target.onblur=function(e){document.onkeydown=null}},this.line.render(),this.tumbler.render(),this.selected.render(),"point"==this.type?this.tumblerShifted({startPrc:0}):this.tumblerShifted({}),this.element=t.querySelector(".RangeSlider"),this.element},e.prototype.viewUpdate=function(e,t){"vertical"==this.orient?(this.tumbler.elements[0].style.bottom=e+"%",this.tumbler.elements[1].style.bottom=t+"%",this.selected.element.style.bottom=e+"%",this.selected.element.style.top=100-t+"%"):(this.tumbler.elements[0].style.left=e+"%",this.tumbler.elements[1].style.left=t+"%",this.selected.element.style.left=e+"%",this.selected.element.style.right=100-t+"%")},e}();return{Model:new i(e),Presenter:new n(e),View:new r(e),init:function(){this.View.tumblerShifted=this.Presenter.shiftReac.bind(this.Presenter),this.Presenter.callToModel=this.Model.update.bind(this.Model),this.Model.updated=this.Presenter.updateReact.bind(this.Presenter),this.Presenter.callToView=this.View.viewUpdate.bind(this.View),this.View.render()},getValue:function(){return console.log("Selected range: "+this.Model.value[0]+" â€” "+this.Model.value[1]),this.Model.value},setValue:function(e,t){this.Presenter.shiftReac({startPrc:(e-this.Model.origin)/this.Model.range*100,endPrc:(t-this.Model.origin)/this.Model.range*100,direct:!0})}}}var r=document.querySelector(".wrapper>div"),s=document.querySelector(".wrapper-two>div"),o=document.querySelector(".wrapper-three>div"),l=n.call(r,{type:"range",start:20,end:80,step:5}),h=n.call(s,{type:"point",origin:10,range:90,end:10,step:5}),a=n.call(o,{type:"point",orient:"vertical",origin:0,end:5,range:10});l.init(),h.init(),a.init()},function(e,t,i){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDcmVhdGVTbGlkZXIiLCJvcHRpb25zIiwicm9vdCIsInRoaXMiLCJjbE1vZGVsIiwicmFuZ2UiLCJzdGFydCIsImVuZCIsIm9yaWdpbiIsInN0ZXAiLCJfc3RhcnQiLCJNYXRoIiwibWF4IiwiX2VuZCIsIm1pbiIsIm51bSIsInVwZGF0ZSIsImRhdGEiLCJkaXJlY3QiLCJ1bmRlZmluZWQiLCJlbmRQcmMiLCJzdGFydFByYyIsInRlcHBpbmdfZmlyc3QiLCJ0ZXBwaW5nX2xhc3QiLCJuZXdTdGFydCIsIm5ld0VuZCIsInJvdW5kIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZWQiLCJDbFByZXNlbnRlciIsIm9yaWVudCIsImludmVyc2lvbiIsInNoaWZ0UmVhYyIsImNhbGxUb01vZGVsIiwidXBkYXRlUmVhY3QiLCJmaXJDb29yIiwic2VjQ29vciIsImNhbGxUb1ZpZXciLCJjbFZpZXciLCJ0eXBlIiwidHVtYmxlclNpemUiLCJ0dW1ibGVyQ29sb3IiLCJ0dW1ibGVyUm91bmRuZXNzIiwidHVtYmxlckJvcmRlcnMiLCJsaW5lV2VpZ2h0IiwibGluZUNvbG9yIiwibGluZVJvdW5kbmVzcyIsInNlbGVjdGVkQmFja2dyb3VuZCIsInNlbGVjdGVkV2VpZ2h0IiwiTGluZUNsYXNzIiwid2VpZ2h0IiwiY29sb3IiLCJyb3VuZG5lc3MiLCJyZW5kZXIiLCJsaW5lIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzdHlsZSIsIndpZHRoIiwiaGVpZ2h0IiwiYmFja2dyb3VuZCIsImJvcmRlclJhZGl1cyIsIlR1bWJsZXJDbGFzcyIsImh0bWwiLCJzaXplIiwiZWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsIiwiZWxlbSIsImJvcmRlciIsImJvcmRlcnMiLCJ0cmFuc2Zvcm0iLCJtYXJnaW5MZWZ0IiwicGFyZW50RWxlbWVudCIsIm1hcmdpblRvcCIsImRpc3BsYXkiLCJvbm1vdXNlZG93biIsIm9uY2xpY2siLCJvbmZvY3VzIiwiU2VsZWN0ZWRDbGFzcyIsInNlbGVjdGVkIiwidHVtYmxlciIsImlubmVySFRNTCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm9ubW91c2Vtb3ZlIiwiZXYiLCJ0YXJnZXQiLCJiaWFzIiwiY2xpZW50WSIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInkiLCJjbGllbnRYIiwieCIsIm5leHRTaWJsaW5nIiwidHVtYmxlclNoaWZ0ZWQiLCJkb2N1bWVudCIsIm9ubW91c2V1cCIsImZpcnN0IiwiQm9vbGVhbiIsIm9ua2V5ZG93biIsIm9uYmx1ciIsInZpZXdVcGRhdGUiLCJmaXJQb3MiLCJzZWNQb3MiLCJib3R0b20iLCJ0b3AiLCJsZWZ0IiwicmlnaHQiLCJNb2RlbCIsIlByZXNlbnRlciIsIlZpZXciLCJpbml0IiwiZ2V0VmFsdWUiLCJzZXRWYWx1ZSIsImVsZW0yIiwiZWxlbTMiLCJzbGlkZXIiLCJzbGlkZXIyIiwic2xpZGVyMyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMs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UUFBU2hDLE9BQVEsR0FBSUgsTUFBTyxHQUFJRSxJQUFJLEdBQUlFLEtBQU0sSUFDeEZnSCxFQUFVekgsRUFBYTdCLEtBQUttSixFQUFPLENBQUM5RSxLQUFNLFFBQVNULE9BQU8sV0FBWXZCLE9BQVEsRUFBR0QsSUFBSSxFQUFHRixNQUFPLEtBRW5Ha0gsRUFBT0wsT0FDUE0sRUFBUU4sT0FDUk8sRUFBUVAsUSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIuL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBGdW5jdGlvbkJhc2UgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBcIi4vbWFpbi5zY3NzXCJcclxuXHJcbmZ1bmN0aW9uIENyZWF0ZVNsaWRlcihvcHRpb25zOm9iamVjdCl7ICBcclxuICAgIGNvbnN0IHJvb3QgPSB0aGlzIGFzIEhUTUxFbGVtZW50XHJcbiAgICBcclxuICAgIGNvbnN0IGNsTW9kZWwgPSBjbGFzc3tcclxuICAgICAgICBwcml2YXRlIF9zdGFydDogbnVtYmVyO1xyXG4gICAgICAgIHByaXZhdGUgX2VuZDogbnVtYmVyO1xyXG4gICAgICAgIHJhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgb3JpZ2luOiBudW1iZXI7XHJcbiAgICAgICAgc3RlcDpudW1iZXI7XHJcbiAgICAgICAgdmFsdWU6IEFycmF5PG51bWJlcj47XHJcbiAgICAgICAgc2V0IHN0YXJ0KG51bTpudW1iZXIpe1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydCA9IE1hdGgubWluKHRoaXMuZW5kLCBNYXRoLm1heChudW0sIDApIClcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0IHN0YXJ0KCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydFxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZW5kKG51bTpudW1iZXIpe1xyXG4gICAgICAgICAgICB0aGlzLl9lbmQgPSBNYXRoLm1heCh0aGlzLnN0YXJ0LCBNYXRoLm1pbihudW0sIHRoaXMucmFuZ2UpIClcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGVuZCgpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5kXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdXBkYXRlZDogRnVuY3Rpb247XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3RydWN0b3IoeyByYW5nZSA9IDEwMCwgIHN0YXJ0ID0gMCwgZW5kPW51bGwsIG9yaWdpbiA9IDAsIHN0ZXA9MX0pe1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydCA9IE1hdGgubWF4KHN0YXJ0IC0gb3JpZ2luLCAwKSBcclxuICAgICAgICAgICAgdGhpcy5fZW5kID0gZW5kID09PSBudWxsID8gcmFuZ2UgOiBNYXRoLm1pbihyYW5nZSwgTWF0aC5tYXgodGhpcy5zdGFydCwgZW5kLW9yaWdpbikgKSBcclxuICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlXHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcCA9IHN0ZXBcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFt0aGlzLnN0YXJ0ICsgdGhpcy5vcmlnaW4sIHRoaXMuZW5kICsgdGhpcy5vcmlnaW5dXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGUoZGF0YToge3N0YXJ0UHJjOiBudW1iZXIsIGVuZFByYzogbnVtYmVyLCBkaXJlY3Q6Ym9vbGVhbiwgdGVwcGluZ19maXJzdDogbnVtYmVyLCB0ZXBwaW5nX2xhc3Q6IG51bWJlcn0pOnZvaWR7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGRhdGEuZGlyZWN0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gZGF0YS5lbmRQcmMgIT09IHVuZGVmaW5lZCA/IDEwMC90aGlzLnJhbmdlKiAoZGF0YS5lbmRQcmMgLSB0aGlzLm9yaWdpbikgOiB0aGlzLmVuZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IGRhdGEuc3RhcnRQcmMgIT09IHVuZGVmaW5lZCA/IDEwMC90aGlzLnJhbmdlKiAoZGF0YS5zdGFydFByYyAtIHRoaXMub3JpZ2luKSA6IHRoaXMuc3RhcnRcclxuICAgICAgICAgICAgICAgIC8vUHJjINGPINC+0LHQvtC30L3QsNGH0LDRjiBcItC/0YDQvtGG0LXQvdGC0YtcIiwg0L3QviDQvdC1INCyINGB0LvRg9GH0LDQtSDQstGL0YjQtS4g0KLRg9GCINCw0LHRgdC+0LvRjtGC0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8g0LHRg9C00YPRgiDQv9C+0YHRgtGD0L/QsNGC0Ywg0YfQtdGA0LXQtyDQv9GA0Y/QvNC+0Lkg0LLQstC+0LRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGRhdGEudGVwcGluZ19maXJzdCB8fCBkYXRhLnRlcHBpbmdfbGFzdCl7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnRlcHBpbmdfZmlyc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgKz0gZGF0YS50ZXBwaW5nX2ZpcnN0KnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS50ZXBwaW5nX2xhc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kICs9IGRhdGEudGVwcGluZ19sYXN0KnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3U3RhcnQgPSB0aGlzLnJhbmdlLzEwMCpkYXRhLnN0YXJ0UHJjIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0VuZCA9IHRoaXMucmFuZ2UvMTAwKmRhdGEuZW5kUHJjXHJcbiAgICAgICAgICAgICAgICBpZigobmV3RW5kIC0gdGhpcy5lbmQpID49IHRoaXMuc3RlcCowLjcgfHwgKHRoaXMuZW5kIC0gbmV3RW5kKSA+PSB0aGlzLnN0ZXAqMC43IHx8IG5ld0VuZD09dGhpcy5yYW5nZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmQgPSBNYXRoLnJvdW5kKG5ld0VuZC90aGlzLnN0ZXApKnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoKG5ld1N0YXJ0IC0gdGhpcy5zdGFydCkgPj0gdGhpcy5zdGVwKjAuNyB8fCAodGhpcy5zdGFydCAtIG5ld1N0YXJ0KSA+PSB0aGlzLnN0ZXAqMC43IHx8IG5ld1N0YXJ0PT0wKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gTWF0aC5yb3VuZChuZXdTdGFydC90aGlzLnN0ZXApKnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFt0aGlzLnN0YXJ0ICsgdGhpcy5vcmlnaW4sIHRoaXMuZW5kICsgdGhpcy5vcmlnaW5dXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudmFsdWUpXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlZCgxMDAvdGhpcy5yYW5nZSp0aGlzLnN0YXJ0LCAxMDAvdGhpcy5yYW5nZSp0aGlzLmVuZClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0IENsUHJlc2VudGVyID0gY2xhc3N7XHJcbiAgICAgICAgaW52ZXJzaW9uOiBib29sZWFuO1xyXG5cclxuICAgICAgICBjYWxsVG9Nb2RlbDogRnVuY3Rpb247XHJcbiAgICAgICAgY2FsbFRvVmlldzogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHtvcmllbnQgPSBcImhvcml6b250YWxcIn0peyBcclxuICAgICAgICAgICAgaWYob3JpZW50ID09PSBcInZlcnRpY2FsXCIpIHRoaXMuaW52ZXJzaW9uID0gdHJ1ZVxyXG4gICAgICAgICAgICBlbHNlIHRoaXMuaW52ZXJzaW9uID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hpZnRSZWFjKGRhdGE6IHtlbmRQcmM6IG51bWJlciwgc3RhcnRQcmM6IG51bWJlcn0pe1xyXG4gICAgICAgICAgICBpZighdGhpcy5pbnZlcnNpb24pe3RoaXMuY2FsbFRvTW9kZWwoZGF0YSl9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmVuZFByYylkYXRhLmVuZFByYyA9IDEwMCAtIGRhdGEuZW5kUHJjXHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN0YXJ0UHJjKWRhdGEuc3RhcnRQcmMgPSAxMDAgLSBkYXRhLnN0YXJ0UHJjXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxUb01vZGVsKGRhdGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlUmVhY3QoZmlyQ29vcjpudW1iZXIsIHNlY0Nvb3I6bnVtYmVyKXtcclxuICAgICAgICAgICAgdGhpcy5jYWxsVG9WaWV3KGZpckNvb3IsIHNlY0Nvb3IpXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjbFZpZXcgPSBjbGFzc3tcclxuICAgICAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgICAgICBvcmllbnQ6IHN0cmluZztcclxuICAgICAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICAgICAgb3JpZ2luOiBudW1iZXI7XHJcbiAgICAgICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIHJhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgc3RhcnQ6bnVtYmVyO1xyXG4gICAgICAgIGVuZDogbnVtYmVyO1xyXG5cclxuICAgICAgICB0dW1ibGVyOiB7aHRtbDogc3RyaW5nOyBlbGVtZW50czpOb2RlTGlzdE9mPEVsZW1lbnQ+O29yaWVudDogc3RyaW5nOyB0eXBlOiBzdHJpbmc7IHNpemU6IHN0cmluZzsgY29sb3I6IHN0cmluZzsgcm91bmRuZXNzOiBzdHJpbmc7IGJvcmRlcnM6IHN0cmluZzsgb25jbGljazogRXZlbnRMaXN0ZW5lcjsgb25mb2N1czogRXZlbnRMaXN0ZW5lcjsgcmVuZGVyOiBGdW5jdGlvbn07XHJcbiAgICAgICAgbGluZToge2VsZW1lbnQ6IEhUTUxFbGVtZW50O29yaWVudDogc3RyaW5nOyB3ZWlnaHQ6IHN0cmluZzsgY29sb3I6IHN0cmluZzsgcm91bmRuZXNzOiBzdHJpbmc7IGJvcmRlcnM6IHN0cmluZzsgcmVuZGVyOiBGdW5jdGlvbn1cclxuICAgICAgICBzZWxlY3RlZCA6IHtodG1sOiBzdHJpbmc7IGVsZW1lbnQ6IEhUTUxFbGVtZW50OyBvcmllbnQ6IHN0cmluZzsgY29sb3I6IHN0cmluZzsgd2VpZ2h0OiBzdHJpbmc7cm91bmRuZXNzOiBzdHJpbmc7IHJlbmRlcjogRnVuY3Rpb259XHJcblxyXG4gICAgICAgIHR1bWJsZXJTaGlmdGVkOiBGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgTGluZUNsYXNzID0gY2xhc3N7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBvcmllbnQ6IHN0cmluZztcclxuICAgICAgICAgICAgd2VpZ2h0OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHJvdW5kbmVzczogc3RyaW5nO1xyXG4gICAgICAgICAgICBib3JkZXJzOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGRhdGE6IHtvcmllbnQ6IHN0cmluZywgd2VpZ2h0OiBzdHJpbmcsY29sb3I6IHN0cmluZywgcm91bmRuZXNzOiBzdHJpbmd9KXtcclxuICAgICAgICAgICAgICAgIHRoaXMub3JpZW50ID0gZGF0YS5vcmllbnRcclxuICAgICAgICAgICAgICAgIHRoaXMud2VpZ2h0ID0gZGF0YS53ZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gZGF0YS5jb2xvclxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3VuZG5lc3MgPSBkYXRhLnJvdW5kbmVzc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlbmRlcigpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmUgPSB0aGlzLmVsZW1lbnQgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIuUmFuZ2VTbGlkZXJfX2xpbmVcIikgYXMgSFRNTEVsZW1lbnRcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMub3JpZW50ID09IFwidmVydGljYWxcIikgbGluZS5zdHlsZS53aWR0aCA9IHRoaXMud2VpZ2h0XHJcbiAgICAgICAgICAgICAgICBlbHNlIGxpbmUuc3R5bGUuaGVpZ2h0ID0gdGhpcy53ZWlnaHRcclxuICAgICAgICAgICAgICAgIGxpbmUuc3R5bGUuYmFja2dyb3VuZCA9IHRoaXMuY29sb3JcclxuICAgICAgICAgICAgICAgIGxpbmUuc3R5bGUuYm9yZGVyUmFkaXVzID0gdGhpcy5yb3VuZG5lc3NcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBUdW1ibGVyQ2xhc3MgPSBjbGFzc3tcclxuICAgICAgICAgICAgaHRtbDogc3RyaW5nO1xyXG4gICAgICAgICAgICBlbGVtZW50czogTm9kZUxpc3RPZjxIVE1MRWxlbWVudD5cclxuICAgICAgICAgICAgb3JpZW50OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHR5cGU6IHN0cmluZztcclxuICAgICAgICAgICAgc2l6ZTogc3RyaW5nO1xyXG4gICAgICAgICAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgICAgICAgICByb3VuZG5lc3M6IHN0cmluZztcclxuICAgICAgICAgICAgYm9yZGVyczogc3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgb25jbGljazogRXZlbnRMaXN0ZW5lcjtcclxuICAgICAgICAgICAgb25mb2N1czogRXZlbnRMaXN0ZW5lcjtcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3RydWN0b3IoZGF0YToge29yaWVudDpzdHJpbmcsIHR5cGU6c3RyaW5nLCBzaXplOnN0cmluZywgY29sb3I6c3RyaW5nLCByb3VuZG5lc3M6c3RyaW5nLCBib3JkZXJzIDpzdHJpbmd9KXtcclxuICAgICAgICAgICAgICAgIHRoaXMuaHRtbCA9IGA8c3BhbiB0YWJpbmRleD0gXCIxXCI7IGNsYXNzPSdSYW5nZVNsaWRlcl9fdHVtYmxlcic+IDwvc3Bhbj5gXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudCA9IGRhdGEub3JpZW50XHJcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBkYXRhLnR5cGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPSBkYXRhLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3VuZG5lc3MgPSBkYXRhLnJvdW5kbmVzcztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVuZGVyKCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gcm9vdC5xdWVyeVNlbGVjdG9yQWxsKFwiLlJhbmdlU2xpZGVyX190dW1ibGVyXCIpIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5mb3JFYWNoKChlbCwgaSk9PnsgXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVsZW0gPSAoZWwgYXMgSFRNTEVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5oZWlnaHQgPSB0aGlzLnNpemUgXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS53aWR0aCA9IHRoaXMuc2l6ZSBcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmJhY2tncm91bmQgPSB0aGlzLmNvbG9yXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5ib3JkZXJSYWRpdXMgPSB0aGlzLnJvdW5kbmVzc1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuIGJvcmRlciA9IHRoaXMuYm9yZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUudHJhbnNmb3JtID0gdGhpcy5vcmllbnQgPT0gXCJ2ZXJ0aWNhbFwiID8gXCJ0cmFuc2xhdGVZKDUwJSlcIiA6IFwidHJhbnNsYXRlWCgtNTAlKVwiXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5vcmllbnQgPT0gXCJ2ZXJ0aWNhbFwiKSBlbGVtLnN0eWxlLm1hcmdpbkxlZnQgPSAgYGNhbGMoICgtJHt0aGlzLnNpemV9ICsgJHtlbGVtLnBhcmVudEVsZW1lbnQuc3R5bGUud2lkdGh9KSAvMilgXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbGVtLnN0eWxlLm1hcmdpblRvcCA9IGBjYWxjKCgtJHt0aGlzLnNpemV9ICsgJHtlbGVtLnBhcmVudEVsZW1lbnQuc3R5bGUuaGVpZ2h0fSkvMilgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy50eXBlID09PSBcInBvaW50XCIgJiYgaT09PTApIGVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5vbm1vdXNlZG93biA9IHRoaXMub25jbGlja1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ub25mb2N1cyA9IHRoaXMub25mb2N1c1xyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTZWxlY3RlZENsYXNzID0gY2xhc3N7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBodG1sOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIG9yaWVudDogc3RyaW5nO1xyXG4gICAgICAgICAgICBjb2xvcjogc3RyaW5nO1xyXG4gICAgICAgICAgICB3ZWlnaHQ6IHN0cmluZztcclxuICAgICAgICAgICAgcm91bmRuZXNzOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGRhdGE6IHtyb3VuZG5lc3M6IHN0cmluZywgb3JpZW50OiBzdHJpbmcsY29sb3I6IHN0cmluZywgd2VpZ2h0OnN0cmluZ30pe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5odG1sID0gXCI8ZGl2IGNsYXNzPSdSYW5nZVNsaWRlcl9fc2VsZWN0ZWQnPjwvZGl2PlwiXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9yaWVudCA9IGRhdGEub3JpZW50XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gZGF0YS5jb2xvcjtcclxuICAgICAgICAgICAgICAgIHRoaXMud2VpZ2h0ID0gZGF0YS53ZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdW5kbmVzcyA9IGRhdGEucm91bmRuZXNzO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVuZGVyKCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWQgPSB0aGlzLmVsZW1lbnQgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIuUmFuZ2VTbGlkZXJfX3NlbGVjdGVkXCIpXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLm9yaWVudCA9PSBcInZlcnRpY2FsXCIpIHNlbGVjdGVkLnN0eWxlLm1hcmdpbkxlZnQgPSAgYGNhbGMoICgtJHt0aGlzLndlaWdodH0gKyAke3NlbGVjdGVkLnBhcmVudEVsZW1lbnQuc3R5bGUud2lkdGh9KSAvMilgXHJcbiAgICAgICAgICAgICAgICBlbHNlIHNlbGVjdGVkLnN0eWxlLm1hcmdpblRvcCA9IGBjYWxjKCAoLSR7dGhpcy53ZWlnaHR9ICsgJHtzZWxlY3RlZC5wYXJlbnRFbGVtZW50LnN0eWxlLmhlaWdodH0pIC8yKWBcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMub3JpZW50ID09IFwidmVydGljYWxcIikgc2VsZWN0ZWQuc3R5bGUud2lkdGggPSB0aGlzLndlaWdodFxyXG4gICAgICAgICAgICAgICAgZWxzZSBzZWxlY3RlZC5zdHlsZS5oZWlnaHQgPSB0aGlzLndlaWdodFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWQuc3R5bGUuYmFja2dyb3VuZCA9IHRoaXMuY29sb3JcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMucm91bmRuZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHtvcmllbnQgPSBcImhvcml6b250YWxcIix0eXBlPSBcInJhbmdlXCIsdHVtYmxlclNpemU9XCIyMHB4XCIsIHR1bWJsZXJDb2xvcj1cImRhcmtibHVlXCIsIHR1bWJsZXJSb3VuZG5lc3M9XCI1MCVcIiwgdHVtYmxlckJvcmRlcnMgPSBcIm5vbmVcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVdlaWdodD1cIjEycHhcIiwgbGluZUNvbG9yPVwiZ3JleVwiLCAgbGluZVJvdW5kbmVzcz1cIjEwcHhcIiwgc2VsZWN0ZWRCYWNrZ3JvdW5kPVwiYmx1ZVwiLCBzZWxlY3RlZFdlaWdodCA9IFwiMTZweFwifSl7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAgICAgICB0aGlzLm9yaWVudCA9IG9yaWVudFxyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlXHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudHVtYmxlciA9IG5ldyB0aGlzLlR1bWJsZXJDbGFzcyh7b3JpZW50OiBvcmllbnQsIHR5cGU6IHR5cGUsIHNpemU6dHVtYmxlclNpemUgLGNvbG9yOnR1bWJsZXJDb2xvcixyb3VuZG5lc3M6dHVtYmxlclJvdW5kbmVzcywgYm9yZGVyczogdHVtYmxlckJvcmRlcnN9KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5saW5lID0gbmV3IHRoaXMuTGluZUNsYXNzKHtvcmllbnQ6IG9yaWVudCwgd2VpZ2h0OiBsaW5lV2VpZ2h0LGNvbG9yOiBsaW5lQ29sb3IsIHJvdW5kbmVzczogbGluZVJvdW5kbmVzc30pXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gbmV3IHRoaXMuU2VsZWN0ZWRDbGFzcyh7cm91bmRuZXNzOiBsaW5lUm91bmRuZXNzLCBvcmllbnQ6IG9yaWVudCwgd2VpZ2h0OiBzZWxlY3RlZFdlaWdodCwgY29sb3I6IHNlbGVjdGVkQmFja2dyb3VuZH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlbmRlcigpOiBIVE1MRWxlbWVudHtcclxuICAgICAgICAgICAgcm9vdC5pbm5lckhUTUwgPSAgYDxkaXYgY2xhc3M9J1JhbmdlU2xpZGVyIFJhbmdlU2xpZGVyX29yaWVudF8ke3RoaXMub3JpZW50fSc+PGRpdiBjbGFzcz0nUmFuZ2VTbGlkZXJfX2xpbmUnPiAke3RoaXMuc2VsZWN0ZWQuaHRtbH0ke3RoaXMudHVtYmxlci5odG1sfSR7dGhpcy50dW1ibGVyLmh0bWx9PC9kaXY+IDxkaXYgY2xhc3M9J1JhbmdlU2xpZGVyX19tZWFuaW5nJz48L2Rpdj4gPC9kaXY+PC9kaXY+YDtcclxuICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy50dW1ibGVyLm9uY2xpY2sgPSBlID0+e1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICAgICAgICAgICAgICByb290Lm9ubW91c2Vtb3ZlID0gZXY9PntcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHVtYmxlciA9IDxIVE1MRWxlbWVudD5lLnRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbGluZT0gcm9vdC5xdWVyeVNlbGVjdG9yKFwiLlJhbmdlU2xpZGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJpYXMgPSB0aGlzLm9yaWVudCA9PT0gXCJ2ZXJ0aWNhbFwiID8gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGV2LmNsaWVudFkgLSBsaW5lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnkpL2xpbmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICogMTAwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChldi5jbGllbnRYIC0gbGluZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS54KS9saW5lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICogMTAwIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0dW1ibGVyLm5leHRTaWJsaW5nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dW1ibGVyU2hpZnRlZCh7c3RhcnRQcmM6IGJpYXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlKHRoaXMudHVtYmxlclNoaWZ0ZWQoe2VuZFByYzogYmlhcyB9KSApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSBlPT57XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnR1bWJsZXIub25mb2N1cyA9IGV2PT57XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3QgPSBCb29sZWFuKCg8SFRNTEVsZW1lbnQ+ZXYudGFyZ2V0KS5uZXh0U2libGluZylcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGU9PntcclxuICAgICAgICAgICAgICAgICAgICBpZihmaXJzdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoZS5rZXkgPT09IFwiQXJyb3dEb3duXCIgJiYgdGhpcy5vcmllbnQgPT09XCJ2ZXJ0aWNhbFwiKSB8fCAoZS5rZXkgPT09IFwiQXJyb3dMZWZ0XCIgJiYgdGhpcy5vcmllbnQgIT09XCJ2ZXJ0aWNhbFwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR1bWJsZXJTaGlmdGVkKHt0ZXBwaW5nX2ZpcnN0OiAtMX0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYoIChlLmtleSA9PT0gXCJBcnJvd1VwXCIgJiYgdGhpcy5vcmllbnQgPT09XCJ2ZXJ0aWNhbFwiKSB8fCAoZS5rZXkgPT09IFwiQXJyb3dSaWdodFwiICYmIHRoaXMub3JpZW50ICE9PVwidmVydGljYWxcIikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dW1ibGVyU2hpZnRlZCh7dGVwcGluZ19maXJzdDogMX0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIChlLmtleSA9PT0gXCJBcnJvd0Rvd25cIiAmJiB0aGlzLm9yaWVudCA9PT1cInZlcnRpY2FsXCIpIHx8IChlLmtleSA9PT0gXCJBcnJvd0xlZnRcIiAmJiB0aGlzLm9yaWVudCAhPT1cInZlcnRpY2FsXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHVtYmxlclNoaWZ0ZWQoe3RlcHBpbmdfbGFzdDogLTF9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCAoZS5rZXkgPT09IFwiQXJyb3dVcFwiICYmIHRoaXMub3JpZW50ID09PVwidmVydGljYWxcIikgfHwgKGUua2V5ID09PSBcIkFycm93UmlnaHRcIiAmJiB0aGlzLm9yaWVudCAhPT1cInZlcnRpY2FsXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHVtYmxlclNoaWZ0ZWQoe3RlcHBpbmdfbGFzdDogMX0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAoPEhUTUxFbGVtZW50PmV2LnRhcmdldCkub25ibHVyID0gZT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMubGluZS5yZW5kZXIoKVxyXG5cclxuICAgICAgICAgICAgdGhpcy50dW1ibGVyLnJlbmRlcigpXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkLnJlbmRlcigpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy50eXBlID09IFwicG9pbnRcIikgdGhpcy50dW1ibGVyU2hpZnRlZCh7c3RhcnRQcmM6IDB9KVxyXG4gICAgICAgICAgICBlbHNlIHRoaXMudHVtYmxlclNoaWZ0ZWQoe30pXHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIuUmFuZ2VTbGlkZXJcIilcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHZpZXdVcGRhdGUoZmlyUG9zOm51bWJlciwgc2VjUG9zOm51bWJlcil7XHJcbiAgICAgICAgICAgIGlmKHRoaXMub3JpZW50ID09IFwidmVydGljYWxcIil7XHJcbiAgICAgICAgICAgICAgICAodGhpcy50dW1ibGVyLmVsZW1lbnRzWzBdYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvdHRvbSA9IGZpclBvcyArIFwiJVwiO1xyXG4gICAgICAgICAgICAgICAgKHRoaXMudHVtYmxlci5lbGVtZW50c1sxXWFzIEhUTUxFbGVtZW50KS5zdHlsZS5ib3R0b20gPSBzZWNQb3MgICsgXCIlXCJcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuZWxlbWVudC5zdHlsZS5ib3R0b20gPSBmaXJQb3MgKyBcIiVcIlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5lbGVtZW50LnN0eWxlLnRvcCA9IDEwMCAtIHNlY1BvcyArIFwiJVwiXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgKHRoaXMudHVtYmxlci5lbGVtZW50c1swXWFzIEhUTUxFbGVtZW50KS5zdHlsZS5sZWZ0ID0gZmlyUG9zICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICAodGhpcy50dW1ibGVyLmVsZW1lbnRzWzFdYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmxlZnQgPSBzZWNQb3MgICsgXCIlXCJcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuZWxlbWVudC5zdHlsZS5sZWZ0ID0gZmlyUG9zICsgXCIlXCJcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQuZWxlbWVudC5zdHlsZS5yaWdodCA9IDEwMCAtIHNlY1BvcyArIFwiJVwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0IFJhbmdlU2xpZGVyID0geyBcclxuXHJcbiAgICAgICAgTW9kZWw6IG5ldyBjbE1vZGVsKG9wdGlvbnMpLFxyXG4gICAgICAgIFByZXNlbnRlcjogbmV3IENsUHJlc2VudGVyKG9wdGlvbnMpLFxyXG4gICAgICAgIFZpZXc6IG5ldyBjbFZpZXcob3B0aW9ucyksXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICB0aGlzLlZpZXcudHVtYmxlclNoaWZ0ZWQgPSB0aGlzLlByZXNlbnRlci5zaGlmdFJlYWMuYmluZCh0aGlzLlByZXNlbnRlcilcclxuICAgICAgICAgICAgdGhpcy5QcmVzZW50ZXIuY2FsbFRvTW9kZWwgPSB0aGlzLk1vZGVsLnVwZGF0ZS5iaW5kKHRoaXMuTW9kZWwpXHJcbiAgICAgICAgICAgIHRoaXMuTW9kZWwudXBkYXRlZCA9IHRoaXMuUHJlc2VudGVyLnVwZGF0ZVJlYWN0LmJpbmQodGhpcy5QcmVzZW50ZXIpXHJcbiAgICAgICAgICAgIHRoaXMuUHJlc2VudGVyLmNhbGxUb1ZpZXcgPSB0aGlzLlZpZXcudmlld1VwZGF0ZS5iaW5kKHRoaXMuVmlldylcclxuXHJcbiAgICAgICAgICAgIHRoaXMuVmlldy5yZW5kZXIoKSAgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXRWYWx1ZSgpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgU2VsZWN0ZWQgcmFuZ2U6ICR7dGhpcy5Nb2RlbC52YWx1ZVswXX0g4oCUICR7dGhpcy5Nb2RlbC52YWx1ZVsxXX1gKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Nb2RlbC52YWx1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0VmFsdWUoc3RhcnQ6bnVtYmVyLCBlbmQ6bnVtYmVyKXtcclxuICAgICAgICAgICAgdGhpcy5QcmVzZW50ZXIuc2hpZnRSZWFjKHtzdGFydFByYzogKHN0YXJ0LXRoaXMuTW9kZWwub3JpZ2luKS90aGlzLk1vZGVsLnJhbmdlICogMTAwLCBlbmRQcmM6IChlbmQtdGhpcy5Nb2RlbC5vcmlnaW4pL3RoaXMuTW9kZWwucmFuZ2UqMTAwLCBkaXJlY3Q6IHRydWV9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9LFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFJhbmdlU2xpZGVyXHJcbiAgICBcclxufVxyXG5sZXQgZWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIud3JhcHBlcj5kaXZcIilcclxubGV0IGVsZW0yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cmFwcGVyLXR3bz5kaXZcIilcclxubGV0IGVsZW0zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cmFwcGVyLXRocmVlPmRpdlwiKVxyXG5cclxubGV0IHNsaWRlciA9IENyZWF0ZVNsaWRlci5jYWxsKGVsZW0sIHt0eXBlOiBcInJhbmdlXCIsc3RhcnQ6MjAsIGVuZCA6IDgwLCBzdGVwOiA1fSApXHJcbmxldCBzbGlkZXIyID0gQ3JlYXRlU2xpZGVyLmNhbGwoZWxlbTIsIHt0eXBlOiBcInBvaW50XCIsIG9yaWdpbjogMTAsIHJhbmdlOiA5MCwgZW5kOjEwLCBzdGVwOiA1fSApXHJcbmxldCBzbGlkZXIzID0gQ3JlYXRlU2xpZGVyLmNhbGwoZWxlbTMsIHt0eXBlOiBcInBvaW50XCIsIG9yaWVudDpcInZlcnRpY2FsXCIsIG9yaWdpbjogMCwgZW5kOjUsIHJhbmdlOiAxMH0gKVxyXG5cclxuc2xpZGVyLmluaXQoKVxyXG5zbGlkZXIyLmluaXQoKVxyXG5zbGlkZXIzLmluaXQoKVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9