!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);i(1);function n(e){var t=this,i=function(){function e(e){var t=e.range,i=void 0===t?100:t,n=e.start,r=void 0===n?0:n,s=e.end,o=void 0===s?null:s,l=e.origin,h=void 0===l?0:l,a=e.step,d=void 0===a?1:a;this._start=Math.max(r-h,0),this._end=null===o?i:Math.min(i,Math.max(this.start,o-h)),this.range=i,this.origin=h,this.step=d,this.value=[this.start+this.origin,this.end+this.origin]}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},set:function(e){this._start=Math.min(this.end,Math.max(e,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},set:function(e){this._end=Math.max(this.start,Math.min(e,this.range))},enumerable:!1,configurable:!0}),e.prototype.update=function(e){if(e.direct)this.end=void 0!==e.endPrc?100/this.range*(e.endPrc-this.origin):this.end,this.start=void 0!==e.startPrc?100/this.range*(e.startPrc-this.origin):this.start;else if(e.tepping_first||e.tepping_last)e.tepping_first&&(this.start+=e.tepping_first*this.step),e.tepping_last&&(this.end+=e.tepping_last*this.step);else{var t=this.range/100*e.startPrc,i=this.range/100*e.endPrc;(i-this.end>=.7*this.step||this.end-i>=.7*this.step||i==this.range)&&(this.end=Math.round(i/this.step)*this.step),(t-this.start>=.7*this.step||this.start-t>=.7*this.step||0==t)&&(this.start=Math.round(t/this.step)*this.step)}this.value=[this.start+this.origin,this.end+this.origin],console.log(this.value),this.updated(100/this.range*this.start,100/this.range*this.end)},e}(),n=function(){function e(e){var t=e.orient,i=void 0===t?"horizontal":t;this.inversion="vertical"===i}return e.prototype.shiftReac=function(e){this.inversion?(e.endPrc&&(e.endPrc=100-e.endPrc),e.startPrc&&(e.startPrc=100-e.startPrc),this.callToModel(e)):this.callToModel(e)},e.prototype.updateReact=function(e,t){this.callToView(e,t)},e}(),r=function(){function e(e){var i=e.orient,n=void 0===i?"horizontal":i,r=e.type,s=void 0===r?"range":r,o=e.tumblerSize,l=void 0===o?"20px":o,h=e.tumblerColor,a=void 0===h?"darkblue":h,d=e.tumblerRoundness,u=void 0===d?"50%":d,c=e.tumblerBorders,g=void 0===c?"none":c,p=e.lineWeight,m=void 0===p?"12px":p,f=e.lineColor,b=void 0===f?"grey":f,v=e.lineRoundness,y=void 0===v?"10px":v,w=e.selectedBackground,S=void 0===w?"blue":w,_=e.selectedWeight,P=void 0===_?"16px":_;this.LineClass=function(e){this.weight=e.weight,this.color=e.color,this.roundness=e.roundness},this.TumblerClass=function(){function e(e){this.html="<span tabindex= \"1\"; class='RangeSlider__tumbler'> </span>",this.size=e.size,this.color=e.color,this.roundness=e.roundness}return e.prototype.onclick=function(e){var i=this;e.preventDefault(),t.onmousemove=function(n){var r=e.target,s=t.querySelector(".RangeSlider"),o="vertical"===i.orient?(n.clientY-s.getBoundingClientRect().y)/s.getBoundingClientRect().height*100:(n.clientX-s.getBoundingClientRect().x)/s.getBoundingClientRect().width*100;r.nextSibling?i.tumblerShifted({startPrc:o}):i.tumblerShifted({endPrc:o})},document.onmouseup=function(e){t.onmousemove=null,document.onmouseup=null}},e.prototype.onfocus=function(e){var t=this,i=Boolean(e.target.nextSibling);document.onkeydown=function(e){i?"ArrowDown"===e.key&&"vertical"===t.orient||"ArrowLeft"===e.key&&"vertical"!==t.orient?t.tumblerShifted({tepping_first:-1}):("ArrowUp"===e.key&&"vertical"===t.orient||"ArrowRight"===e.key&&"vertical"!==t.orient)&&t.tumblerShifted({tepping_first:1}):"ArrowDown"===e.key&&"vertical"===t.orient||"ArrowLeft"===e.key&&"vertical"!==t.orient?t.tumblerShifted({tepping_last:-1}):("ArrowUp"===e.key&&"vertical"===t.orient||"ArrowRight"===e.key&&"vertical"!==t.orient)&&t.tumblerShifted({tepping_last:1})},e.target.onblur=function(e){document.onkeydown=null}},e}(),this.SelectedClass=function(e){this.html="<div class='RangeSlider__selected'></div>",this.color=e.color,this.weight=e.weight},this.element,this.orient=n,this.type=s,this.tumbler=new this.TumblerClass({size:l,color:a,roundness:u,borders:g}),this.tumbler.onclick=this.tumbler.onclick.bind(this),this.tumbler.onfocus=this.tumbler.onfocus.bind(this),this.line=new this.LineClass({weight:m,color:b,roundness:y}),this.selected=new this.SelectedClass({weight:P,color:S})}return e.prototype.render=function(){var e=this;t.innerHTML="<div class='RangeSlider RangeSlider_orient_"+this.orient+"'><div class='RangeSlider__line'> "+this.selected.html+"  "+this.tumbler.html+this.tumbler.html+"</div>  <div class='RangeSlider__meaning'></div> </div></div>",this.element=t.querySelector(".RangeSlider"),this.tumbler.elements=this.element.querySelectorAll(".RangeSlider__tumbler"),this.tumbler.elements.forEach((function(t,i){var n=t;n.style.height=e.tumbler.size,n.style.width=e.tumbler.size,n.style.background=e.tumbler.color,n.style.borderRadius=e.tumbler.roundness,n.style.border=e.tumbler.borders,n.style.transform="vertical"==e.orient?"translateY(50%)":"translateX(-50%)","vertical"==e.orient?n.style.marginLeft="calc((-"+e.tumbler.size+" + "+e.line.weight+")/2)":n.style.marginTop="calc((-"+e.tumbler.size+" + "+e.line.weight+")/2)","point"===e.type&&0===i&&(n.style.display="none"),n.onmousedown=function(t){e.tumbler.onclick(t)},n.onfocus=function(t){e.tumbler.onfocus(t)}}));var i=this.line.element=this.element.querySelector(".RangeSlider__line");"vertical"==this.orient?i.style.width=this.line.weight:i.style.height=this.line.weight,i.style.background=this.line.color,i.style.borderRadius=this.line.roundness;var n=this.selected.element=this.element.querySelector(".RangeSlider__selected");return"vertical"==this.orient?n.style.marginLeft="calc((-"+this.selected.weight+" + "+this.line.weight+")/2)":n.style.marginTop="calc((-"+this.selected.weight+" + "+this.line.weight+")/2)","vertical"==this.orient?n.style.width=this.selected.weight:n.style.height=this.selected.weight,n.style.background=this.selected.color,n.style.borderRadius=this.line.roundness,"point"==this.type?this.tumblerShifted({startPrc:0}):this.tumblerShifted({}),this.element},e.prototype.viewUpdate=function(e,t){"vertical"==this.orient?(this.tumbler.elements[0].style.bottom=e+"%",this.tumbler.elements[1].style.bottom=t+"%",this.selected.element.style.bottom=e+"%",this.selected.element.style.top=100-t+"%"):(this.tumbler.elements[0].style.left=e+"%",this.tumbler.elements[1].style.left=t+"%",this.selected.element.style.left=e+"%",this.selected.element.style.right=100-t+"%")},e}();return{Model:new i(e),Presenter:new n(e),View:new r(e),init:function(){this.View.tumblerShifted=this.Presenter.shiftReac.bind(this.Presenter),this.Presenter.callToModel=this.Model.update.bind(this.Model),this.Model.updated=this.Presenter.updateReact.bind(this.Presenter),this.Presenter.callToView=this.View.viewUpdate.bind(this.View),this.View.render()},getValue:function(){return console.log("Selected range: "+this.Model.value[0]+" â€” "+this.Model.value[1]),this.Model.value},setValue:function(e,t){this.Presenter.shiftReac({startPrc:(e-this.Model.origin)/this.Model.range*100,endPrc:(t-this.Model.origin)/this.Model.range*100,direct:!0})}}}var r=document.querySelector(".wrapper>div"),s=document.querySelector(".wrapper-two>div"),o=document.querySelector(".wrapper-three>div"),l=n.call(r,{type:"range",start:20,end:80,step:5}),h=n.call(s,{type:"point",origin:10,range:90,end:10,step:5}),a=n.call(o,{type:"point",orient:"vertical",origin:0,end:5,range:10});l.init(),h.init(),a.init()},function(e,t,i){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJDcmVhdGVTbGlkZXIiLCJvcHRpb25zIiwicm9vdCIsInRoaXMiLCJjbE1vZGVsIiwicmFuZ2UiLCJzdGFydCIsImVuZCIsIm9yaWdpbiIsInN0ZXAiLCJfc3RhcnQiLCJNYXRoIiwibWF4IiwiX2VuZCIsIm1pbiIsIm51bSIsInVwZGF0ZSIsImRhdGEiLCJkaXJlY3QiLCJ1bmRlZmluZWQiLCJlbmRQcmMiLCJzdGFydFByYyIsInRlcHBpbmdfZmlyc3QiLCJ0ZXBwaW5nX2xhc3QiLCJuZXdTdGFydCIsIm5ld0VuZCIsInJvdW5kIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZWQiLCJDbFByZXNlbnRlciIsIm9yaWVudCIsImludmVyc2lvbiIsInNoaWZ0UmVhYyIsImNhbGxUb01vZGVsIiwidXBkYXRlUmVhY3QiLCJmaXJDb29yIiwic2VjQ29vciIsImNhbGxUb1ZpZXciLCJjbFZpZXciLCJ0eXBlIiwidHVtYmxlclNpemUiLCJ0dW1ibGVyQ29sb3IiLCJ0dW1ibGVyUm91bmRuZXNzIiwidHVtYmxlckJvcmRlcnMiLCJsaW5lV2VpZ2h0IiwibGluZUNvbG9yIiwibGluZVJvdW5kbmVzcyIsInNlbGVjdGVkQmFja2dyb3VuZCIsInNlbGVjdGVkV2VpZ2h0IiwiTGluZUNsYXNzIiwid2VpZ2h0IiwiY29sb3IiLCJyb3VuZG5lc3MiLCJUdW1ibGVyQ2xhc3MiLCJodG1sIiwic2l6ZSIsIm9uY2xpY2siLCJlIiwicHJldmVudERlZmF1bHQiLCJvbm1vdXNlbW92ZSIsImV2IiwidHVtYmxlciIsInRhcmdldCIsImxpbmUiLCJxdWVyeVNlbGVjdG9yIiwiYmlhcyIsImNsaWVudFkiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ5IiwiaGVpZ2h0IiwiY2xpZW50WCIsIngiLCJ3aWR0aCIsIm5leHRTaWJsaW5nIiwidHVtYmxlclNoaWZ0ZWQiLCJkb2N1bWVudCIsIm9ubW91c2V1cCIsIm9uZm9jdXMiLCJmaXJzdCIsIkJvb2xlYW4iLCJvbmtleWRvd24iLCJvbmJsdXIiLCJTZWxlY3RlZENsYXNzIiwiZWxlbWVudCIsImJvcmRlcnMiLCJzZWxlY3RlZCIsInJlbmRlciIsImlubmVySFRNTCIsImVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJlbCIsImVsZW0iLCJzdHlsZSIsImJhY2tncm91bmQiLCJib3JkZXJSYWRpdXMiLCJib3JkZXIiLCJ0cmFuc2Zvcm0iLCJtYXJnaW5MZWZ0IiwibWFyZ2luVG9wIiwiZGlzcGxheSIsIm9ubW91c2Vkb3duIiwidmlld1VwZGF0ZSIsImZpclBvcyIsInNlY1BvcyIsImJvdHRvbSIsInRvcCIsImxlZnQiLCJyaWdodCIsIk1vZGVsIiwiUHJlc2VudGVyIiwiVmlldyIsImluaXQiLCJnZXRWYWx1ZSIsInNldFZhbHVlIiwiZWxlbTIiLCJlbGVtMyIsInNsaWRlciIsInNsaWRlcjIiLCJzbGlkZXIzIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FB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R0QsSUFBSSxFQUFHRixNQUFPLEtBRW5HaUgsRUFBT0wsT0FDUE0sRUFBUU4sT0FDUk8sRUFBUVAsUSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIuL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgeyBGdW5jdGlvbkJhc2UgfSBmcm9tIFwibG9kYXNoXCI7XHJcbmltcG9ydCBcIi4vbWFpbi5zY3NzXCJcclxuXHJcbmZ1bmN0aW9uIENyZWF0ZVNsaWRlcihvcHRpb25zOm9iamVjdCl7ICBcclxuICAgIGNvbnN0IHJvb3QgPSB0aGlzIGFzIEhUTUxFbGVtZW50XHJcbiAgICBcclxuICAgIGNvbnN0IGNsTW9kZWwgPSBjbGFzc3tcclxuICAgICAgICBwcml2YXRlIF9zdGFydDogbnVtYmVyO1xyXG4gICAgICAgIHByaXZhdGUgX2VuZDogbnVtYmVyO1xyXG4gICAgICAgIHJhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgb3JpZ2luOiBudW1iZXI7XHJcbiAgICAgICAgc3RlcDpudW1iZXI7XHJcbiAgICAgICAgdmFsdWU6IEFycmF5PG51bWJlcj47XHJcbiAgICAgICAgc2V0IHN0YXJ0KG51bTpudW1iZXIpe1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydCA9IE1hdGgubWluKHRoaXMuZW5kLCBNYXRoLm1heChudW0sIDApIClcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0IHN0YXJ0KCl7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGFydFxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgZW5kKG51bTpudW1iZXIpe1xyXG4gICAgICAgICAgICB0aGlzLl9lbmQgPSBNYXRoLm1heCh0aGlzLnN0YXJ0LCBNYXRoLm1pbihudW0sIHRoaXMucmFuZ2UpIClcclxuICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGVuZCgpe1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5kXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgdXBkYXRlZDogRnVuY3Rpb247XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3RydWN0b3IoeyByYW5nZSA9IDEwMCwgIHN0YXJ0ID0gMCwgZW5kPW51bGwsIG9yaWdpbiA9IDAsIHN0ZXA9MX0pe1xyXG4gICAgICAgICAgICB0aGlzLl9zdGFydCA9IE1hdGgubWF4KHN0YXJ0IC0gb3JpZ2luLCAwKSBcclxuICAgICAgICAgICAgdGhpcy5fZW5kID0gZW5kID09PSBudWxsID8gcmFuZ2UgOiBNYXRoLm1pbihyYW5nZSwgTWF0aC5tYXgodGhpcy5zdGFydCwgZW5kLW9yaWdpbikgKSBcclxuICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlXHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luID0gb3JpZ2luXHJcbiAgICAgICAgICAgIHRoaXMuc3RlcCA9IHN0ZXBcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFt0aGlzLnN0YXJ0ICsgdGhpcy5vcmlnaW4sIHRoaXMuZW5kICsgdGhpcy5vcmlnaW5dXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGUoZGF0YToge3N0YXJ0UHJjOiBudW1iZXIsIGVuZFByYzogbnVtYmVyLCBkaXJlY3Q6Ym9vbGVhbiwgdGVwcGluZ19maXJzdDogbnVtYmVyLCB0ZXBwaW5nX2xhc3Q6IG51bWJlcn0pOnZvaWR7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmKGRhdGEuZGlyZWN0KXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5kID0gZGF0YS5lbmRQcmMgIT09IHVuZGVmaW5lZCA/IDEwMC90aGlzLnJhbmdlKiAoZGF0YS5lbmRQcmMgLSB0aGlzLm9yaWdpbikgOiB0aGlzLmVuZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCA9IGRhdGEuc3RhcnRQcmMgIT09IHVuZGVmaW5lZCA/IDEwMC90aGlzLnJhbmdlKiAoZGF0YS5zdGFydFByYyAtIHRoaXMub3JpZ2luKSA6IHRoaXMuc3RhcnRcclxuICAgICAgICAgICAgICAgIC8vUHJjINGPINC+0LHQvtC30L3QsNGH0LDRjiBcItC/0YDQvtGG0LXQvdGC0YtcIiwg0L3QviDQvdC1INCyINGB0LvRg9GH0LDQtSDQstGL0YjQtS4g0KLRg9GCINCw0LHRgdC+0LvRjtGC0L3Ri9C1INC30L3QsNGH0LXQvdC40Y8g0LHRg9C00YPRgiDQv9C+0YHRgtGD0L/QsNGC0Ywg0YfQtdGA0LXQtyDQv9GA0Y/QvNC+0Lkg0LLQstC+0LRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmKGRhdGEudGVwcGluZ19maXJzdCB8fCBkYXRhLnRlcHBpbmdfbGFzdCl7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnRlcHBpbmdfZmlyc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnQgKz0gZGF0YS50ZXBwaW5nX2ZpcnN0KnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS50ZXBwaW5nX2xhc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kICs9IGRhdGEudGVwcGluZ19sYXN0KnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3U3RhcnQgPSB0aGlzLnJhbmdlLzEwMCpkYXRhLnN0YXJ0UHJjIFxyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0VuZCA9IHRoaXMucmFuZ2UvMTAwKmRhdGEuZW5kUHJjXHJcbiAgICAgICAgICAgICAgICBpZigobmV3RW5kIC0gdGhpcy5lbmQpID49IHRoaXMuc3RlcCowLjcgfHwgKHRoaXMuZW5kIC0gbmV3RW5kKSA+PSB0aGlzLnN0ZXAqMC43IHx8IG5ld0VuZD09dGhpcy5yYW5nZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmQgPSBNYXRoLnJvdW5kKG5ld0VuZC90aGlzLnN0ZXApKnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoKG5ld1N0YXJ0IC0gdGhpcy5zdGFydCkgPj0gdGhpcy5zdGVwKjAuNyB8fCAodGhpcy5zdGFydCAtIG5ld1N0YXJ0KSA+PSB0aGlzLnN0ZXAqMC43IHx8IG5ld1N0YXJ0PT0wKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0ID0gTWF0aC5yb3VuZChuZXdTdGFydC90aGlzLnN0ZXApKnRoaXMuc3RlcFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICBcclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IFt0aGlzLnN0YXJ0ICsgdGhpcy5vcmlnaW4sIHRoaXMuZW5kICsgdGhpcy5vcmlnaW5dXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudmFsdWUpXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlZCgxMDAvdGhpcy5yYW5nZSp0aGlzLnN0YXJ0LCAxMDAvdGhpcy5yYW5nZSp0aGlzLmVuZClcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNvbnN0IENsUHJlc2VudGVyID0gY2xhc3N7XHJcbiAgICAgICAgaW52ZXJzaW9uOiBib29sZWFuO1xyXG5cclxuICAgICAgICBjYWxsVG9Nb2RlbDogRnVuY3Rpb247XHJcbiAgICAgICAgY2FsbFRvVmlldzogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHtvcmllbnQgPSBcImhvcml6b250YWxcIn0peyBcclxuICAgICAgICAgICAgaWYob3JpZW50ID09PSBcInZlcnRpY2FsXCIpIHRoaXMuaW52ZXJzaW9uID0gdHJ1ZVxyXG4gICAgICAgICAgICBlbHNlIHRoaXMuaW52ZXJzaW9uID0gZmFsc2VcclxuICAgICAgICB9XHJcbiAgICAgICAgc2hpZnRSZWFjKGRhdGE6IHtlbmRQcmM6IG51bWJlciwgc3RhcnRQcmM6IG51bWJlcn0pe1xyXG4gICAgICAgICAgICBpZighdGhpcy5pbnZlcnNpb24pe3RoaXMuY2FsbFRvTW9kZWwoZGF0YSl9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmVuZFByYylkYXRhLmVuZFByYyA9IDEwMCAtIGRhdGEuZW5kUHJjXHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLnN0YXJ0UHJjKWRhdGEuc3RhcnRQcmMgPSAxMDAgLSBkYXRhLnN0YXJ0UHJjXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbGxUb01vZGVsKGRhdGEpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdXBkYXRlUmVhY3QoZmlyQ29vcjpudW1iZXIsIHNlY0Nvb3I6bnVtYmVyKXtcclxuICAgICAgICAgICAgdGhpcy5jYWxsVG9WaWV3KGZpckNvb3IsIHNlY0Nvb3IpXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjbFZpZXcgPSBjbGFzc3tcclxuICAgICAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgICAgICBvcmllbnQ6IHN0cmluZztcclxuICAgICAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICAgICAgb3JpZ2luOiBudW1iZXI7XHJcbiAgICAgICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgICAgIHJhbmdlOiBudW1iZXI7XHJcbiAgICAgICAgc3RhcnQ6bnVtYmVyO1xyXG4gICAgICAgIGVuZDogbnVtYmVyO1xyXG4gICAgICAgIHR1bWJsZXJTaGlmdGVkOiBGdW5jdGlvbjtcclxuICAgICAgICB0dW1ibGVyOiB7aHRtbDogc3RyaW5nOyBlbGVtZW50czpOb2RlTGlzdE9mPEVsZW1lbnQ+OyAgc2l6ZTogc3RyaW5nOyBjb2xvcjogc3RyaW5nOyByb3VuZG5lc3M6IHN0cmluZzsgYm9yZGVyczogc3RyaW5nOyBvbmNsaWNrOiBFdmVudExpc3RlbmVyOyBvbmZvY3VzOiBFdmVudExpc3RlbmVyfTtcclxuICAgICAgICBsaW5lOiB7ZWxlbWVudDogSFRNTEVsZW1lbnQ7IHdlaWdodDogc3RyaW5nOyBjb2xvcjogc3RyaW5nOyByb3VuZG5lc3M6IHN0cmluZzsgYm9yZGVyczogc3RyaW5nO31cclxuICAgICAgICBzZWxlY3RlZCA6IHtodG1sOiBzdHJpbmc7IGVsZW1lbnQ6IEhUTUxFbGVtZW50OyBjb2xvcjogc3RyaW5nOyB3ZWlnaHQ6IHN0cmluZzt9XHJcblxyXG4gICAgICAgIExpbmVDbGFzcyA9IGNsYXNze1xyXG4gICAgICAgICAgICBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgd2VpZ2h0OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHJvdW5kbmVzczogc3RyaW5nO1xyXG4gICAgICAgICAgICBib3JkZXJzOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGRhdGE6IHt3ZWlnaHQ6IHN0cmluZyxjb2xvcjogc3RyaW5nLCByb3VuZG5lc3M6IHN0cmluZ30pe1xyXG4gICAgICAgICAgICAgICAgdGhpcy53ZWlnaHQgPSBkYXRhLndlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPSBkYXRhLmNvbG9yXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdW5kbmVzcyA9IGRhdGEucm91bmRuZXNzXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgVHVtYmxlckNsYXNzID0gY2xhc3N7XHJcbiAgICAgICAgICAgIGh0bWw6IHN0cmluZztcclxuICAgICAgICAgICAgZWxlbWVudHM6IE5vZGVMaXN0T2Y8SFRNTEVsZW1lbnQ+XHJcbiAgICAgICAgICAgIHNpemU6IHN0cmluZztcclxuICAgICAgICAgICAgY29sb3I6IHN0cmluZztcclxuICAgICAgICAgICAgcm91bmRuZXNzOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGJvcmRlcnM6IHN0cmluZztcclxuXHJcbiAgICAgICAgICAgIHR1bWJsZXJTaGlmdGVkOkZ1bmN0aW9uOyBcclxuICAgICAgICAgICAgb3JpZW50OiBzdHJpbmc7IFxyXG4gICAgICAgICAgICAvL9Cn0YLQvtCx0YsgVFMg0L3QtSDQstGL0LTQsNCy0LDQuyDQvtGI0LjQsdC60YMuIG9uY2xpY2sg0L3QsCDRgdCw0LzQvtC8LdGC0L4g0LTQtdC70LUg0LHRg9C00LXRgiDQt9Cw0L/Rg9GB0LrQsNGC0YzRgdGPINCyINC60L7QvdGC0LXRgdGC0LUgVmlldy4gLiBcclxuICAgICAgICAgICAgLy/QpdC+0YLQtdC70L7RgdGMINC70LjRgdGC0LXQvdC10YAg0L/QvtC80LXRgdGC0LjRgtGMINCyINC/0L7Qu9C30YPQvdC+0LosINC90L4g0L7RgNC40LXQvdGC0LDRhtC40Y4g0Lgg0LrQvtC70LvQsdGN0Log0LXQvNGDINC/0L4t0YHRg9GC0Lgg0LfQvdCw0YLRjCDQvdC1INC90YPQttC90L5cclxuXHJcblxyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihkYXRhOiB7IHNpemU6c3RyaW5nLCBjb2xvcjpzdHJpbmcsIHJvdW5kbmVzczpzdHJpbmcsIGJvcmRlcnMgOnN0cmluZ30pe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5odG1sID0gYDxzcGFuIHRhYmluZGV4PSBcIjFcIjsgY2xhc3M9J1JhbmdlU2xpZGVyX190dW1ibGVyJz4gPC9zcGFuPmBcclxuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IGRhdGEuc2l6ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sb3IgPSBkYXRhLmNvbG9yO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3VuZG5lc3MgPSBkYXRhLnJvdW5kbmVzcztcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb25jbGljayhlOiBNb3VzZUV2ZW50KTogdm9pZHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKVxyXG4gICAgICAgICAgICAgICAgcm9vdC5vbm1vdXNlbW92ZSA9IGV2PT57XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHR1bWJsZXIgPSA8SFRNTEVsZW1lbnQ+ZS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmU9IHJvb3QucXVlcnlTZWxlY3RvcihcIi5SYW5nZVNsaWRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiaWFzID0gdGhpcy5vcmllbnQgPT09IFwidmVydGljYWxcIiA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChldi5jbGllbnRZIC0gbGluZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55KS9saW5lLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCAqIDEwMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZXYuY2xpZW50WCAtIGxpbmUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueCkvbGluZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCAqIDEwMCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCB0dW1ibGVyLm5leHRTaWJsaW5nKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dW1ibGVyU2hpZnRlZCh7c3RhcnRQcmM6IGJpYXN9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlKHRoaXMudHVtYmxlclNoaWZ0ZWQoe2VuZFByYzogYmlhcyB9KSApXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSBlPT57XHJcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXVwID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvbmZvY3VzKGV2OkZvY3VzRXZlbnQgKTp2b2lke1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpcnN0ID0gQm9vbGVhbigoPEhUTUxFbGVtZW50PmV2LnRhcmdldCkubmV4dFNpYmxpbmcpXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSBlPT57XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmlyc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggKGUua2V5ID09PSBcIkFycm93RG93blwiICYmIHRoaXMub3JpZW50ID09PVwidmVydGljYWxcIikgfHwgKGUua2V5ID09PSBcIkFycm93TGVmdFwiICYmIHRoaXMub3JpZW50ICE9PVwidmVydGljYWxcIikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50dW1ibGVyU2hpZnRlZCh7dGVwcGluZ19maXJzdDogLTF9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCAoZS5rZXkgPT09IFwiQXJyb3dVcFwiICYmIHRoaXMub3JpZW50ID09PVwidmVydGljYWxcIikgfHwgKGUua2V5ID09PSBcIkFycm93UmlnaHRcIiAmJiB0aGlzLm9yaWVudCAhPT1cInZlcnRpY2FsXCIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHVtYmxlclNoaWZ0ZWQoe3RlcHBpbmdfZmlyc3Q6IDF9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCAoZS5rZXkgPT09IFwiQXJyb3dEb3duXCIgJiYgdGhpcy5vcmllbnQgPT09XCJ2ZXJ0aWNhbFwiKSB8fCAoZS5rZXkgPT09IFwiQXJyb3dMZWZ0XCIgJiYgdGhpcy5vcmllbnQgIT09XCJ2ZXJ0aWNhbFwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR1bWJsZXJTaGlmdGVkKHt0ZXBwaW5nX2xhc3Q6IC0xfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiggKGUua2V5ID09PSBcIkFycm93VXBcIiAmJiB0aGlzLm9yaWVudCA9PT1cInZlcnRpY2FsXCIpIHx8IChlLmtleSA9PT0gXCJBcnJvd1JpZ2h0XCIgJiYgdGhpcy5vcmllbnQgIT09XCJ2ZXJ0aWNhbFwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR1bWJsZXJTaGlmdGVkKHt0ZXBwaW5nX2xhc3Q6IDF9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKDxIVE1MRWxlbWVudD5ldi50YXJnZXQpLm9uYmx1ciA9IGU9PntcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5vbmtleWRvd24gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTZWxlY3RlZENsYXNzID0gY2xhc3N7XHJcbiAgICAgICAgICAgIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBodG1sOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbG9yOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHdlaWdodDogc3RyaW5nO1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihkYXRhOiB7Y29sb3I6IHN0cmluZywgd2VpZ2h0OnN0cmluZ30pe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5odG1sID0gXCI8ZGl2IGNsYXNzPSdSYW5nZVNsaWRlcl9fc2VsZWN0ZWQnPjwvZGl2PlwiXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yID0gZGF0YS5jb2xvcjtcclxuICAgICAgICAgICAgICAgIHRoaXMud2VpZ2h0ID0gZGF0YS53ZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioe29yaWVudCA9IFwiaG9yaXpvbnRhbFwiLHR5cGU9IFwicmFuZ2VcIix0dW1ibGVyU2l6ZT1cIjIwcHhcIiwgdHVtYmxlckNvbG9yPVwiZGFya2JsdWVcIiwgdHVtYmxlclJvdW5kbmVzcz1cIjUwJVwiLCB0dW1ibGVyQm9yZGVycyA9IFwibm9uZVwiLCBcclxuICAgICAgICAgICAgICAgICAgICBsaW5lV2VpZ2h0PVwiMTJweFwiLCBsaW5lQ29sb3I9XCJncmV5XCIsICBsaW5lUm91bmRuZXNzPVwiMTBweFwiLCBzZWxlY3RlZEJhY2tncm91bmQ9XCJibHVlXCIsIHNlbGVjdGVkV2VpZ2h0ID0gXCIxNnB4XCJ9KXtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50XHJcbiAgICAgICAgICAgIHRoaXMub3JpZW50ID0gb3JpZW50XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGVcclxuICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy50dW1ibGVyID0gbmV3IHRoaXMuVHVtYmxlckNsYXNzKHtzaXplOnR1bWJsZXJTaXplICxjb2xvcjp0dW1ibGVyQ29sb3Iscm91bmRuZXNzOnR1bWJsZXJSb3VuZG5lc3MsIGJvcmRlcnM6IHR1bWJsZXJCb3JkZXJzfSlcclxuICAgICAgICAgICAgdGhpcy50dW1ibGVyLm9uY2xpY2sgPSB0aGlzLnR1bWJsZXIub25jbGljay5iaW5kKHRoaXMpXHJcbiAgICAgICAgICAgIHRoaXMudHVtYmxlci5vbmZvY3VzID0gdGhpcy50dW1ibGVyLm9uZm9jdXMuYmluZCh0aGlzKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5saW5lID0gbmV3IHRoaXMuTGluZUNsYXNzKHt3ZWlnaHQ6IGxpbmVXZWlnaHQsY29sb3I6IGxpbmVDb2xvciwgcm91bmRuZXNzOiBsaW5lUm91bmRuZXNzfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBuZXcgdGhpcy5TZWxlY3RlZENsYXNzKHt3ZWlnaHQ6IHNlbGVjdGVkV2VpZ2h0LCBjb2xvcjogc2VsZWN0ZWRCYWNrZ3JvdW5kfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVuZGVyKCk6IEhUTUxFbGVtZW50e1xyXG4gICAgICAgICAgICByb290LmlubmVySFRNTCA9ICBgPGRpdiBjbGFzcz0nUmFuZ2VTbGlkZXIgUmFuZ2VTbGlkZXJfb3JpZW50XyR7dGhpcy5vcmllbnR9Jz48ZGl2IGNsYXNzPSdSYW5nZVNsaWRlcl9fbGluZSc+ICR7dGhpcy5zZWxlY3RlZC5odG1sfSAgJHt0aGlzLnR1bWJsZXIuaHRtbH0ke3RoaXMudHVtYmxlci5odG1sfTwvZGl2PiAgPGRpdiBjbGFzcz0nUmFuZ2VTbGlkZXJfX21lYW5pbmcnPjwvZGl2PiA8L2Rpdj48L2Rpdj5gO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSByb290LnF1ZXJ5U2VsZWN0b3IoXCIuUmFuZ2VTbGlkZXJcIilcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudHVtYmxlci5lbGVtZW50cyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlJhbmdlU2xpZGVyX190dW1ibGVyXCIpIFxyXG4gICAgICAgICAgICB0aGlzLnR1bWJsZXIuZWxlbWVudHMuZm9yRWFjaCgoZWwsIGkpPT57IFxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW0gPSAoZWwgYXMgSFRNTEVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmhlaWdodCA9IHRoaXMudHVtYmxlci5zaXplIFxyXG4gICAgICAgICAgICAgICAgZWxlbS5zdHlsZS53aWR0aCA9IHRoaXMudHVtYmxlci5zaXplIFxyXG4gICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5iYWNrZ3JvdW5kID0gdGhpcy50dW1ibGVyLmNvbG9yXHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMudHVtYmxlci5yb3VuZG5lc3NcclxuICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuIGJvcmRlciA9IHRoaXMudHVtYmxlci5ib3JkZXJzXHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnRyYW5zZm9ybSA9IHRoaXMub3JpZW50ID09IFwidmVydGljYWxcIiA/IFwidHJhbnNsYXRlWSg1MCUpXCIgOiBcInRyYW5zbGF0ZVgoLTUwJSlcIlxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5vcmllbnQgPT0gXCJ2ZXJ0aWNhbFwiKSBlbGVtLnN0eWxlLm1hcmdpbkxlZnQgPSAgYGNhbGMoKC0ke3RoaXMudHVtYmxlci5zaXplfSArICR7dGhpcy5saW5lLndlaWdodH0pLzIpYFxyXG4gICAgICAgICAgICAgICAgZWxzZSBlbGVtLnN0eWxlLm1hcmdpblRvcCA9ICBgY2FsYygoLSR7dGhpcy50dW1ibGVyLnNpemV9ICsgJHt0aGlzLmxpbmUud2VpZ2h0fSkvMilgXHJcblxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy50eXBlID09PSBcInBvaW50XCIgJiYgaT09PTApIGVsZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgICAgICAgICBlbGVtLm9ubW91c2Vkb3duID0gZT0+e3RoaXMudHVtYmxlci5vbmNsaWNrKGUpfVxyXG4gICAgICAgICAgICAgICAgZWxlbS5vbmZvY3VzID0gZSA9PiB7dGhpcy50dW1ibGVyLm9uZm9jdXMoZSl9XHJcbiAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsaW5lID0gdGhpcy5saW5lLmVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5SYW5nZVNsaWRlcl9fbGluZVwiKSBhcyBIVE1MRWxlbWVudFxyXG4gICAgICAgICAgICBpZih0aGlzLm9yaWVudCA9PSBcInZlcnRpY2FsXCIpIGxpbmUuc3R5bGUud2lkdGggPSB0aGlzLmxpbmUud2VpZ2h0XHJcbiAgICAgICAgICAgIGVsc2UgbGluZS5zdHlsZS5oZWlnaHQgPSB0aGlzLmxpbmUud2VpZ2h0XHJcbiAgICAgICAgICAgIGxpbmUuc3R5bGUuYmFja2dyb3VuZCA9IHRoaXMubGluZS5jb2xvclxyXG4gICAgICAgICAgICBsaW5lLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMubGluZS5yb3VuZG5lc3NcclxuXHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQuZWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLlJhbmdlU2xpZGVyX19zZWxlY3RlZFwiKVxyXG4gICAgICAgICAgICBpZih0aGlzLm9yaWVudCA9PSBcInZlcnRpY2FsXCIpIHNlbGVjdGVkLnN0eWxlLm1hcmdpbkxlZnQgPSAgYGNhbGMoKC0ke3RoaXMuc2VsZWN0ZWQud2VpZ2h0fSArICR7dGhpcy5saW5lLndlaWdodH0pLzIpYFxyXG4gICAgICAgICAgICBlbHNlIHNlbGVjdGVkLnN0eWxlLm1hcmdpblRvcCA9ICBgY2FsYygoLSR7dGhpcy5zZWxlY3RlZC53ZWlnaHR9ICsgJHt0aGlzLmxpbmUud2VpZ2h0fSkvMilgXHJcbiAgICAgICAgICAgIGlmKHRoaXMub3JpZW50ID09IFwidmVydGljYWxcIikgc2VsZWN0ZWQuc3R5bGUud2lkdGggPSB0aGlzLnNlbGVjdGVkLndlaWdodFxyXG4gICAgICAgICAgICBlbHNlIHNlbGVjdGVkLnN0eWxlLmhlaWdodCA9IHRoaXMuc2VsZWN0ZWQud2VpZ2h0XHJcbiAgICAgICAgICAgIHNlbGVjdGVkLnN0eWxlLmJhY2tncm91bmQgPSB0aGlzLnNlbGVjdGVkLmNvbG9yXHJcbiAgICAgICAgICAgIHNlbGVjdGVkLnN0eWxlLmJvcmRlclJhZGl1cyA9IHRoaXMubGluZS5yb3VuZG5lc3NcclxuICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy50eXBlID09IFwicG9pbnRcIikgdGhpcy50dW1ibGVyU2hpZnRlZCh7c3RhcnRQcmM6IDB9KVxyXG4gICAgICAgICAgICBlbHNlIHRoaXMudHVtYmxlclNoaWZ0ZWQoe30pXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRcclxuICAgICAgICB9XHJcbiAgICAgICAgdmlld1VwZGF0ZShmaXJQb3M6bnVtYmVyLCBzZWNQb3M6bnVtYmVyKXtcclxuICAgICAgICAgICAgaWYodGhpcy5vcmllbnQgPT0gXCJ2ZXJ0aWNhbFwiKXtcclxuICAgICAgICAgICAgICAgICh0aGlzLnR1bWJsZXIuZWxlbWVudHNbMF1hcyBIVE1MRWxlbWVudCkuc3R5bGUuYm90dG9tID0gZmlyUG9zICsgXCIlXCI7XHJcbiAgICAgICAgICAgICAgICAodGhpcy50dW1ibGVyLmVsZW1lbnRzWzFdYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvdHRvbSA9IHNlY1BvcyAgKyBcIiVcIlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5lbGVtZW50LnN0eWxlLmJvdHRvbSA9IGZpclBvcyArIFwiJVwiXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkLmVsZW1lbnQuc3R5bGUudG9wID0gMTAwIC0gc2VjUG9zICsgXCIlXCJcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAodGhpcy50dW1ibGVyLmVsZW1lbnRzWzBdYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmxlZnQgPSBmaXJQb3MgKyBcIiVcIjtcclxuICAgICAgICAgICAgICAgICh0aGlzLnR1bWJsZXIuZWxlbWVudHNbMV1hcyBIVE1MRWxlbWVudCkuc3R5bGUubGVmdCA9IHNlY1BvcyAgKyBcIiVcIlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5lbGVtZW50LnN0eWxlLmxlZnQgPSBmaXJQb3MgKyBcIiVcIlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZC5lbGVtZW50LnN0eWxlLnJpZ2h0ID0gMTAwIC0gc2VjUG9zICsgXCIlXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgY29uc3QgUmFuZ2VTbGlkZXIgPSB7IFxyXG5cclxuICAgICAgICBNb2RlbDogbmV3IGNsTW9kZWwob3B0aW9ucyksXHJcbiAgICAgICAgUHJlc2VudGVyOiBuZXcgQ2xQcmVzZW50ZXIob3B0aW9ucyksXHJcbiAgICAgICAgVmlldzogbmV3IGNsVmlldyhvcHRpb25zKSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuVmlldy50dW1ibGVyU2hpZnRlZCA9IHRoaXMuUHJlc2VudGVyLnNoaWZ0UmVhYy5iaW5kKHRoaXMuUHJlc2VudGVyKVxyXG4gICAgICAgICAgICB0aGlzLlByZXNlbnRlci5jYWxsVG9Nb2RlbCA9IHRoaXMuTW9kZWwudXBkYXRlLmJpbmQodGhpcy5Nb2RlbClcclxuICAgICAgICAgICAgdGhpcy5Nb2RlbC51cGRhdGVkID0gdGhpcy5QcmVzZW50ZXIudXBkYXRlUmVhY3QuYmluZCh0aGlzLlByZXNlbnRlcilcclxuICAgICAgICAgICAgdGhpcy5QcmVzZW50ZXIuY2FsbFRvVmlldyA9IHRoaXMuVmlldy52aWV3VXBkYXRlLmJpbmQodGhpcy5WaWV3KVxyXG5cclxuICAgICAgICAgICAgdGhpcy5WaWV3LnJlbmRlcigpICBcclxuICAgICAgICB9LFxyXG4gICAgICAgIGdldFZhbHVlKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTZWxlY3RlZCByYW5nZTogJHt0aGlzLk1vZGVsLnZhbHVlWzBdfSDigJQgJHt0aGlzLk1vZGVsLnZhbHVlWzFdfWApXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLk1vZGVsLnZhbHVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXRWYWx1ZShzdGFydDpudW1iZXIsIGVuZDpudW1iZXIpe1xyXG4gICAgICAgICAgICB0aGlzLlByZXNlbnRlci5zaGlmdFJlYWMoe3N0YXJ0UHJjOiAoc3RhcnQtdGhpcy5Nb2RlbC5vcmlnaW4pL3RoaXMuTW9kZWwucmFuZ2UgKiAxMDAsIGVuZFByYzogKGVuZC10aGlzLk1vZGVsLm9yaWdpbikvdGhpcy5Nb2RlbC5yYW5nZSoxMDAsIGRpcmVjdDogdHJ1ZX0pXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0sXHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmFuZ2VTbGlkZXJcclxuICAgIFxyXG59XHJcbmxldCBlbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi53cmFwcGVyPmRpdlwiKVxyXG5sZXQgZWxlbTIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyYXBwZXItdHdvPmRpdlwiKVxyXG5sZXQgZWxlbTMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndyYXBwZXItdGhyZWU+ZGl2XCIpXHJcblxyXG5sZXQgc2xpZGVyID0gQ3JlYXRlU2xpZGVyLmNhbGwoZWxlbSwge3R5cGU6IFwicmFuZ2VcIixzdGFydDoyMCwgZW5kIDogODAsIHN0ZXA6IDV9IClcclxubGV0IHNsaWRlcjIgPSBDcmVhdGVTbGlkZXIuY2FsbChlbGVtMiwge3R5cGU6IFwicG9pbnRcIiwgb3JpZ2luOiAxMCwgcmFuZ2U6IDkwLCBlbmQ6MTAsIHN0ZXA6IDV9IClcclxubGV0IHNsaWRlcjMgPSBDcmVhdGVTbGlkZXIuY2FsbChlbGVtMywge3R5cGU6IFwicG9pbnRcIiwgb3JpZW50OlwidmVydGljYWxcIiwgb3JpZ2luOiAwLCBlbmQ6NSwgcmFuZ2U6IDEwfSApXHJcblxyXG5zbGlkZXIuaW5pdCgpXHJcbnNsaWRlcjIuaW5pdCgpXHJcbnNsaWRlcjMuaW5pdCgpXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLCJzb3VyY2VSb290IjoiIn0=